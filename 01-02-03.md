# 실용주의 프로그래머 01, 02, 03

> 회의 역시 프로그래밍이다...

- 09-30 (목)
- 발표자 : 숙련공

## 실용주의 프로그래머는
- 얼리어덥터 성향
- 캐묻기 좋아한다
- 비판적인 사고의 소유자
- 현실적이다
- 다방면의 기술에 익숙하다

```숙련공``` : **경험이 중요해.** 서버 증설할 때 그 기준은 어떻게 무엇으로 잡을거야? 요청에 대한 응답 시간이 느릴때 어떻게 대응해야하지? 응답이 거쳐가는 곳 중 과연 어디가 문제일까?  
```숙련공``` : 이런 것들을 해결하려면 결국 경험이 필요해.. 책만 본다고해서 업무에서 실제로 적용하긴 힘들어.

```숙련공``` : 그리고 이 책, 저 책, 이 사람, 저 사람 코드를 보면서 좋은 코드를 체화해야함.. 그럼 읽기 **좋은 코드**가 뭘까? 

```Bale``` : 숙련공이 생각하는 읽기 좋은 코드란? (엄근진) 세 가지로 요약 바랍니다.

```숙련공``` : 음..;; 변수가 중요함 특히 **(1) 변수의 네이밍이 잘 되어있는 코드**. **(2) 세부구현 안봐도 읽히는 코드**, 그러니까 메서드 명만 봐도 흐름을 알 수 있는 코드. **(3) 메서드를 쭉 따라서 읽을 수 있는 코드**.

```미리내``` : 나는 영어를 잘해야 네이밍을 잘 할 수 있다고 생각함. 불리언 값을 리턴하는 메서드는 is로 시작하는 것처럼... **영어를 잘 해서 메서드나 변수의 의미를 명확히 전달하는게 포인트.**  
```미리내``` : 그리고 코드는 무거워지면 안돼. 깨끗하고 **주석이 필요없는 코드**가 좋은 코드!

```숙련공``` : **결국 읽기 좋은 코드란 역할과 책임~~~! 객체지향을 잘 지키는 코드임.**
갑자기 생각났는데,

```java
user.블라블라(...);
블라블라(user ...); //private method   
```

여기서 만약 private method의 책임을 user로 뺄 수 있다면 객체지향 원칙을 잘 지켜서 user로 옮겨버리는게 더 나은 선택임. user의 역할이 명확하게 드러나잖아.

```미리내``` : 맞음! **solid를 잘 지키는 코드!**

```Bale``` : 아 ㅇㅇ 글고 저렇게 객체지향에서 private method 지양하는게 맞다. 만약 그 메서드를 다른 객체에서도 알아야하는 순간이 오면 래핑하든 어떻게 해서든 결국 노출되고 만다.

```숙련공``` : ㅇㅇ 객체지향을 잘 지키는 코드가 읽기 좋은 코드다.

---

```숙련공``` : 나는 직관적으로 코드를 짤 때가 있어. 그러다가 코드리뷰에서 왜 이렇게 짰어요?라는 질문이 들어왔을 때 제대로 설명을 못한적이 있음. 앞으로 경험을 쌓고 나만의 관점을 가져서 남들에게 설명할 수 있도록 할거야.

## 1. 고양이가 내 소스코드를 삼켰어요
> 소프트웨어 개발자라면 누구나, 반드시, 언젠가는 큰 사고를 치기 마련이다. 사고가 터졌을 때 어떻게 행동해야 하는가?  
> 책임져라..! (헉..) 내가 한 일이니 책임을 져라

```미리내``` : 서비스를 운영하다 보면 내가 예상한 데이터를 넘어서서 **들어올거라 상상도 못했던 데이터가 들어올 수 있어.**

```Bale``` : ㅇㅇ 외부 api를 호출하는 코드에서 우리 쪽에서는 당연히 a라고 생각했는데 데이터 타입때문에 z가 들어와서 버그가 발생한 적이 있음. 근데 신기한건 그때 아무도 남탓하지 않고 문제 해결에만 신경썼어. **예상치 못한 문제가 일어났을 때 사내 or 팀내 분위기가 중요한 것 같아.**

```미리내``` : 나 서비스 장애 일으킨 적 있음. 이슈를 수정하다가 또다른 이슈가 발생한거다. 장애 발생했을 땐 장애는 이미 일어난거고...ㅜ 어떻게든 해결하면 된다고 생각함. **무조건 빨리 보고하고 해결하는게 중요해.**

```숙련공``` : 진짜 파트 분위기가 중요하겠네. **서로 책임질려고 하는 분위기면 같이 행동하게 돼**.  
```숙련공``` : 그리고 내 책임의 영향범위를 아는게 중요함. **내 일의 영향도를 계속 파악하고 있어야돼.** 이게 중요한게, 장애가 터졌을 때 상사가 장애에 대해 첫번째로 물어보는것도 "**그래서 이게 어디까지 영향이 있냐**"임.

---

```숙련공``` : **"분명히 테스트했는데.... ㅠㅠㅠ" 라는 생각보다 빨리 수습하자는 생각을 먼저 하도록 하자.**  
```숙련공``` : 그리고 롤백할지 핫픽스할지 결정해야함. 이걸 빠르게 결정을 내기 위해서 결국 **도메인에 대해 잘 이해하는게 중요해.**

---

```미리내``` : 요새 드는 생각. 의미없는 메서드테스트보단 **엣지케이스, 경계선, 깨질 가능성을 파악해서 테스트를 짜는게 테스트를 잘하는거라고 생각함.**

```숙련공``` : 너네 팀에서 요구하는 **테스트 커버리지**가 있음?

```미리내``` : 우리 팀은 없음. 근데 배민은 100프로 유지하는 팀이 있는거로 안다.

```Bale``` : 그럼 거기는 어드민 쪽도 다 테스트코드를 짜는건가? 아님 커버리지 예외로 두는걸까? 궁금하네

---

```스누피``` : 나는 유닛테스트 못하고 시간상 통테만 한다. 서비스간 결합도가 높아서 유닛테스트 시도가 어려워.  
```스누피``` : 그리고 지금 문제가, 통테 코드를 짜도 하나의 시나리오에 너무 많은 작업이 들어가. 유닛테스트는 잘 모르겠지만 이거 내가 하는 통테를 어떻게 쪼갤수 있을까? 고민중

```미리내``` : 결합도? 목테스트는 어떰? 가짜 데이터로.  
```미리내``` : 로컬테스트 (실제 디비말고)로 하거나 h2 써서 테스트는?

```스누피``` : 로컬에 디비 띄워서 시도했는데, 실제 디비랑 완전호환이 안돼. 그래서 도커 띄워서 거기서 테스트 디비 구성하고 테스트하려고 노력하는중.

```Bale``` : 근데 나도 목테스트가 제일 적합할 것 같다. **지금 말하고 있는 그 테스트는 너무 비대함..** **테스트 역할을 명확하게 나누는게 필요해보이네.**

```미리내``` : ㅇㅇ 동의함. 지금 테스트에서 디비 데이터 저장 + 조회가 있으면 **그 부분에서 이미 책임이 너무 많은 것이 아닐까?** 분리를 해서 각각의 테스트로 만드는게 어떨까?

```Bale``` : 우리는 (통합) 테스트를 먼저 큰 틀로 짜고 결과가 제대로 나오면 그때부터 하나하나 개별 테스트를 메꾼다. 

```스누피``` : 에휴.. 애초에 전체 시스템 자체를 기능 독립적으로 잘 짰으면 어땠을까.. 지금 내가 좀 더 편하지 않았을까.. ㅠㅠ 레거시뿐만 아니라 시간에 쫓겨서 급하게 만든 시스템들... 티가 난다.

```숙련공``` : **유닛테스트는 비즈니스로직을 테스트하는 거다.** 메서드를 잘 쪼개서 역할분담을 잘 해봐.. 계속 객체지향으로 넘어가는 것 같지만 **객체지향적으로 잘 짜면 테스트코드도 짜기 쉬워질거임.**

---

> aws도 터지는데... 내가 만드는 서비스는 안 터질 이유가 없다. 그치만 문제에 대한 변명은 ㄴㄴ

```스누피``` : **변명이라는게... 코드리뷰할때 가장 많이 나오더라.** 사수랑 코드리뷰할때.. 이게 지적이 들어오니까 왜 이 코드를 짰는지 나도 모르게 방어자세가 나온다ㅠ 

```미리내``` : 코드리뷰할때나 의견 교환할때는 **"~~님도 아시겟지만 제생각은 이러이러해요, 어떻게 생각하세요~?"** 처럼 유하게 말하는게 중요한듯.

```스누피``` : 여러분 코드리뷰 어떻게 함?

```숙련공``` : 팀원 전체가 참여하는건 아니고 **해당 작업을 했던 사람들 몇 명씩 초대해서 리뷰함.**

```미리내``` : 나는 극단적인 상황임 ㄷㄷ 사수와 둘이서 다 하고 있어서 **둘이서 리뷰하는 중.**

```토스트``` : 나도 생각해보니 비슷한 상황. 근데 사수랑 둘이 리뷰하는거 별로 안 좋은 것 같아. 나도 충분히 생각해서 코드를 짰고 생각한대로 의견을 냈는데, 되돌아오는 고연차 개발자의 의견이 다 맞는 말 같고...

```미리내``` : ㄱㅊ 1년 2년 넘으면 언젠가 네 의견을 더 자신감있게 피력할 수 있는 상황이 올거임.

```스누피``` : 내가 작성하는 코드 한 줄 한줄이 결국 내가 만든 서비스니까 애정을 가지고 코딩하게 되는 것 같다 ㅎㅎ 리뷰해서 지적받으면 조금 마음 상하는 것도 어쩔수 없는 부분인 듯 함

```Bale``` : 우리는 모든 코드를 리뷰하진 않고 고민되는 것만 리뷰에 올림. **3-4명 정도** 같이 리뷰하고.  
```Bale``` : 리뷰할 땐 비즈니스 로직 검토보단 **깔끔한 코드를 작성했는가** 위주로 검토해. **특히 변수명, 메서드명이나 모듈을 어떻게 정리했는지 위주로 봐줌.** (```누군가``` : 그럼 비즈니스 로직 리뷰는 안해?) 비즈니스 로직은 개인이 테스트를 잘 짜서 해야지...?ㅎ

---

```미리내``` : PR 올릴때도 변경사항 구체적으로 기재하는게 좋은 것 같아! 코드라인 코멘트 기능도 적극 활용하면서!

```Bale``` : 맞음. 우리는 **코드의 변화 요약 + 고민했던 부분 요약**을 적음. 리뷰 보는 사람이 피곤하지 않게 올리는게 중요함.

```토스트``` : 요약은 어떤 수준까지 하는거야?

```숙련공``` : 우리는 **변경한 원인 - 변경 - 참고해야 하는 정보들 (회의록이나 개인적으로 정리한 페이지) 링크 넣어주는 정도?** 근데 요약이란게 **PR의 사이즈에 따라서** 다를 것 같네.


## 2. 소프트웨어 엔트로피
> 엔트로피, 시스템 내의 무질서한 정도, 소프트웨어는 반드시 부패한다.

```숙련공``` : **코드컨벤션! 잘 지키자!** 사소하지만 모두가 편한 개발생활을 위해 지켜야돼. 이거 사소하다고 넘어가다보면 큰 문제가 발생할 수 있음 ㄷㄷ

```숙련공``` : **todo**를 적어놓든지, **지라 티켓따서 백로그**로 남겨서 desc를 적어두던지. 그러면 업무없을 때 백로그 작업을 처리하도록 노력하게 될거임. **방치하지만 말자.**  
```숙련공``` : 내 경험상, 테스트코드가 있던 클래스라면 왠지 테스트코드를 작성하게 된다. 하지만 테스트코드가 없는 클래스라면 원래도 없었는데 하면서 안만들게 된다..........ㅎ

---

```미리내``` : 최근에 기존 시스템에 모듈을 분리하는게 어떻겠냐고 의견을 냈다. 뭔가 작업을 할 때나 새로운 아이디어가 나면 무조건 회의를 거쳐야돼. 맘대로 하면 안된다.

```숙련공``` : ㅇㅇ **평소에 공유를 잘해야한다**. 나도 요새 드는 생각.  
```숙련공``` : 그래야 문제가 발생했을 때도 내가 독박쓰지않는다....!! (ㄷㄷ) 이게 미리미리 남들에게도 공유가 되어야 다른 사람들도 문제에 대응할 수 있게 된다. 아니면 혼자 다 해결해야 하잖아;

```스누피``` : 근데 우리처럼 바쁜 팀이면 공유를 듣지 않음 ㅠㅠ

```미리내``` : 그래서 **개인 문서 정리를 잘해놓는게 중요하다** 생각해. 정리해놓은 문서 링크를 전달해놓으면 나중에 할말이라도 생기니깐ㅎ

---

```토스트``` : **페어 프로그래밍** 경험자 있음?

```스누피``` : 페어 프로그래밍 경험자! 사수랑 나랑 둘이서 코딩하는데 별다른 느낌은 없었고.. 의견교환은 쉬우니까 충돌이 안났다 정도? 엄격하게 따졌을 때 명확한 페어프로그래밍은 아닌듯?

```미리내``` : 근데 페어 프로그래밍 자체는 **두 사람의 실력 차이가 별로 안나야 효과가 있을듯;** 아니면 시니어가 훈수하고 주니어는 스트레스받으면서 하게될게 뻔함ㅋㅋ

```숙련공``` : 페어 프로그래밍에 환장하는 외국인 개발자 있던데.

## 3. 돌멩이 수프와 삶은 개구리

> stonesoup 다른 사람에게 좋은 영향을 미치는 사람이 되자~ 시너지를 일으켜라~

```숙련공``` : 주변에 무슨 일이 벌어지는지 지속적으로 살펴보라. **슬랙 활용! 적극 눈팅!**

```미리내``` : 다른 사람들과 소통하면서 생각지도 못한 부분, 결과가 나올수 있을 것 같음

```스누피``` : 팀에서 돌멩이를 던져봤어?

```미리내``` : 나 돌멩이 잘 던짐.

```스누피``` : 팀내 **기존 (복잡한) 시스템에서 문제를 발견했을 때 고치자고 말하는 거.. 이거 저연차도 해도 되는거?**

```미리내``` : **"최근에 제가 이런 부분을 알게되었는데 쓰면 좋지않을까여 의견 어떠세요?"** 이런식으로.. 유하게 잘 말해봐라

```스누피``` : 무섭다 ㅎㅎ 시작피로라는게, 내가 고치자고 말 꺼내면 그게 내 책임이 되어버리는거 아냐?

```토스트``` : 만약 사수가 괜찮은 사람이면 그 문제를 공론화해줄 수 있을 것 같은데? 그리고 지금의 네 능력으로는 사이즈가 너무 큰 문제면 책임을 분산시켜줄거임.  
```토스트``` : 생각해보니 우리 팀에도 비슷한 문제 (스파게티 덩어리)가 하나 있는데, 모든 팀원들이 그 프로젝트가 문제라는걸 알고 있지만 고치려고 하지 않는다 ㅎㅎ

```미리내``` : 흠. 근데 나 요새 옛날이랑 다르게 생각하는게, **성과를 그만큼 못 뽑으면 차라리 리소스를 다른데 투자하는게 맞지않나**?

```토스트``` : 이게 결국은 높은 분들이 ㅎㅎㅎ 이 프로젝트에 문제가 있고, 그걸 개선해야 한다는걸 납득하셔야하는데 말이지. 이게 하이리스크 로우리턴이라 그냥 넘어가게 되는 것 같다.

```미리내``` : CTO의 역할이 그런게 아닐까? **개발을 잘 알고 복잡하게 얽힌 시스템의 문제와 개선의 필요성을 이해하는 리더.** 배민의 케이스겠네.

```토스트``` : 그래서 배민을 가야 ㅎ

```미리내``` : 우리도 레거시.. 너무 크기때문에.... 쉽게 바꿀수도 없고.... 아휴  
```미리내``` : 어떻게 풀까 고민된다. **단계를 쪼개서 나누고 조금씩 분리하고 그러는 방향이 최선일 듯 하네.** 작게 작게 모듈화하고 하나씩 갈아끼우는게 좋을 것 같음. 배민 왈, **달리는 자동차에 바퀴를 바꾸는 작업이다**~라고 하잖아. 원래 어려운 일인 것 같다.

```숙련공``` : 팀이 바쁜데 시스템 내부가 어찌됐든 기능은 잘 돌아가고 있다면? 당장 해야할 일이 많은데 당연히 나중으로 미뤄지지 ㅠㅠ..  
```숙련공``` : 진짜 어렵다. 월급쟁이 입장에서 해결방안은 없다 생각함. 진짜 위쪽에서 나서서 얘기해주는 방법밖엔 ㅋㅋ **만약 본인이 어려운 일에 보람을 느끼고 많이 배우는 것이 우선순위가 높으면 몸 갈아넣어서 해라.** 가볍게 해볼까 하고 했다가는 리스크가 넘 높음 ㄷ 

---

## 마무리! 스터디 첫날 어땠나
- 스터디하기엔 사실 적합한 책은 아니지만 이렇게 얘기하는거 재밌다.
- 마음가짐 위주라 재밌다.
- 주니어가 앞으로 성장 방향을 잡기 좋은 책이라고 생각한다.
- 내가 지금 가진 문제에 대해 생각지도 못한 해답이 나올수도 있을 것 같다. 
- 경험도 공유하고 많이 배울 수 있을 것 같다.
- 책 자체 토론보단 자기가 일하면서 뭘 겪었는지 위주로 말하자.